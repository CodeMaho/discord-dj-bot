<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéµ Discord DJ Controller</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <span class="icon">üéµ</span>
                <h1>Discord DJ Controller</h1>
            </div>
            <div class="header-right">
                <div class="status-badge" id="connectionStatus">
                    <span class="status-dot"></span>
                    <span class="status-text">Conectando...</span>
                </div>
                <button class="btn-settings" id="settingsToggle" title="Configurar servidor">‚öôÔ∏è</button>
            </div>
        </header>

        <!-- Panel de Configuraci√≥n del Backend -->
        <div class="settings-panel hidden" id="settingsPanel">
            <div class="card">
                <h3>üîß Configuraci√≥n del Servidor</h3>
                <div class="settings-info">
                    <span class="label">Servidor actual:</span>
                    <code id="currentBackendUrl">-</code>
                </div>
                <div class="input-group">
                    <label for="backendUrlInput">URL del Backend</label>
                    <input
                        type="text"
                        id="backendUrlInput"
                        placeholder="https://tu-servidor.com o dejar vac√≠o para local"
                    >
                    <div class="input-hint">
                        Deja vac√≠o para usar el servidor local. Para conexi√≥n remota, introduce la URL del t√∫nel (ej: https://tu-tunel.trycloudflare.com)
                    </div>
                </div>
                <div class="button-group-small">
                    <button class="btn btn-primary" id="saveBackendBtn">
                        üíæ Guardar
                    </button>
                    <button class="btn btn-secondary" id="resetBackendBtn">
                        üîÑ Usar Local
                    </button>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Current Song Display -->
            <div class="now-playing">
                <div class="now-playing-icon">üéß</div>
                <div class="now-playing-info">
                    <div class="label">Reproduciendo Ahora</div>
                    <div class="song-title" id="currentSong">Ninguna canci√≥n</div>
                    <div class="song-status" id="songStatus">
                        <span class="status-indicator stopped"></span>
                        <span id="statusText">Detenido</span>
                    </div>
                    <!-- Progress Bar -->
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                        <div class="progress-time">
                            <span id="currentTime">0:00</span>
                            <span id="totalTime">0:00</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Controls Card -->
            <div class="card">
                <h2>üéÆ Controles</h2>
                
                <!-- URL Input -->
                <div class="input-group">
                    <label for="urlInput">URL de YouTube</label>
                    <div class="input-with-button">
                        <input 
                            type="text" 
                            id="urlInput" 
                            placeholder="https://www.youtube.com/watch?v=..."
                            autocomplete="off"
                        >
                        <button class="btn btn-icon" id="clearBtn" title="Limpiar">
                            ‚úï
                        </button>
                    </div>
                    <div class="input-hint">
                        Pega el enlace completo de YouTube, playlists tambi√©n funcionan
                    </div>
                </div>

                <!-- Audio Device Selection -->
                <div class="input-group">
                    <label for="audioDevice">Dispositivo de Audio</label>
                    <div class="select-wrapper">
                        <select id="audioDevice">
                            <option value="">Cargando dispositivos...</option>
                        </select>
                    </div>
                    <div class="input-hint">
                        Selecciona "CABLE Input" para transmitir a Discord
                    </div>
                </div>

                <!-- Control Buttons -->
                <div class="button-group">
                    <button class="btn btn-primary" id="playBtn">
                        <span class="btn-icon">‚ñ∂Ô∏è</span>
                        Reproducir
                    </button>
                    <button class="btn btn-secondary" id="addQueueBtn">
                        <span class="btn-icon">‚ûï</span>
                        A√±adir a Cola
                    </button>
                    <button class="btn btn-secondary" id="stopBtn">
                        <span class="btn-icon">‚èπÔ∏è</span>
                        Detener
                    </button>
                    <button class="btn btn-secondary" id="refreshBtn">
                        <span class="btn-icon">üîÑ</span>
                        Recargar Dispositivos
                    </button>
                </div>
            </div>

            <!-- Queue Card -->
            <div class="card">
                <div class="queue-header">
                    <h2>üìú Cola de Reproducci√≥n</h2>
                    <span class="queue-count" id="queueCount">0 canciones</span>
                </div>
                
                <div class="queue-container" id="queueContainer">
                    <div class="empty-queue">
                        <span class="empty-icon">üì≠</span>
                        <p>Cola vac√≠a</p>
                        <small>Agrega canciones o playlists para comenzar</small>
                    </div>
                </div>
                
                <div class="queue-actions">
                    <button class="btn btn-secondary" id="skipBtn" disabled>
                        <span class="btn-icon">‚è≠Ô∏è</span>
                        Saltar
                    </button>
                    <button class="btn btn-secondary" id="clearQueueBtn" disabled>
                        <span class="btn-icon">üóëÔ∏è</span>
                        Limpiar Cola
                    </button>
                </div>
            </div>

            <!-- Quick Links -->
            <div class="card quick-links">
                <h3>üîó Enlaces R√°pidos</h3>
                <div class="link-grid">
                    <a href="https://www.youtube.com" target="_blank" class="quick-link">
                        <span class="link-icon">üì∫</span>
                        YouTube
                    </a>
                    <a href="https://music.youtube.com" target="_blank" class="quick-link">
                        <span class="link-icon">üéµ</span>
                        YouTube Music
                    </a>
                    <a href="https://discord.com" target="_blank" class="quick-link">
                        <span class="link-icon">üí¨</span>
                        Discord
                    </a>
                </div>
            </div>

            <!-- Instructions -->
            <div class="card instructions">
                <h3>üìã Instrucciones</h3>
                <ol>
                    <li>
                        <strong>Configura Virtual Audio Cable:</strong> 
                        Aseg√∫rate de que en Discord, el micr√≥fono de tu cuenta "DJ" est√© configurado como "CABLE Output"
                    </li>
                    <li>
                        <strong>Selecciona el dispositivo:</strong> 
                        En el selector de arriba, elige "CABLE Input" para enviar el audio a Discord
                    </li>
                    <li>
                        <strong>Pega el enlace:</strong> 
                        Copia la URL de cualquier video o playlist de YouTube
                    </li>
                    <li>
                        <strong>Reproduce:</strong> 
                        Haz clic en "Reproducir" y la m√∫sica se transmitir√° a Discord
                    </li>
                </ol>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>Hecho con ‚ù§Ô∏è para compartir m√∫sica en Discord</p>
            <p class="footer-note">Recuerda: Esta cuenta debe estar en la llamada de Discord</p>
        </footer>
    </div>

    <!-- Notification Container -->
    <div id="notifications"></div>

    <script src="app_new.js"></script>
</body>
</html>
